<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<title>Testcase bug  - Selecting/deselecting images is slow</title>
<script>
var sel=window.getSelection();


isSelected = false;
var tstart;
function doe(i){
  if (isSelected == true) {isSelected = false; sel.collapse(document.body, 0); } 
  else {sel.selectAllChildren(document.body);isSelected = true;}; 
  if (i>100){alert('Time deselecting/selecting took: ' + (Date.now() - tstart) + 'ms');
    return;
} 
setTimeout(doe, 40, ++i);
} 
</script>
<style>
img {
width: 10px;
height: 10px;
}
</style>
</head>
<body>
<button onclick="tstart = Date.now(); doe(0);">Start select/deselect test</button>
<br>
<div style="max-width: 700px;">
<script>
var str = '<img src="data:image/gif,GIF89a%01%00%01%00%B3%00%00%04%FE%04H%00%00%16%00%00%00%00%00%04%CE%00%00%07%00%00h%00%00%05%00P%A7%DFH%C0%DA%16%009%00%00~X%60%00H%E8%00%16%12%00%00%00%00!%F9%04%00%00%00%00%00%2C%00%00%00%00%01%00%01%00%03%04%02%10D%00%3B" border="0">';
for (var i=0;i<12;i++) {
str += str;
}
document.write(str);
</script>
</div>

</body></html>