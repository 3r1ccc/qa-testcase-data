<!doctype html>
<html>
<head>
  <title>Full Screen Example</title>
  <style type="text/css">
    /* make the video stretch to fill the screen in WebKit */
    :-webkit-full-screen #a {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>

 <a id="aa" href="#" onfocus="toggleFullScreen()" style="display: block; background: green; opacity: 0.9;">toggleFullScreen()</a>
<br><br>
<button id="c" onclick="var win=window.open(window.location.href); ">window.open location.href</button>
<br><br>
<button onclick="setTimeout(toggleFullScreen, 1000)">toggleFullScreen() after timer (should not work)</button><br><br>
<button onclick="toggleFullScreen();setTimeout(function() {window.screen.mozLockOrientation('portrait-primary');setTimeout(function() {window.location.reload();}, 500);}, 500);">toggleFullScreen() after timer (should not work)</button><br><br>
</body>
<script>
  var a = document.getElementById("aa");
  //window.addEventListener('mozfullscreenchange', function() {window.close();}, true)
  function toggleFullScreen() {
    if (!document.mozFullScreen && !document.webkitFullScreen) {
      if (a.mozRequestFullScreen) {
        a.mozRequestFullScreen();
      } else {
        a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
      }
    } else {
      if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } else {
        document.webkitCancelFullScreen();
      }
    }
   a.blur();
  }
  
  document.addEventListener("keydown", function(e) {
    if (e.keyCode == 13) {
      toggleFullScreen();
    }
  }, false);

</script>
</html>